{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzB+D;AAC/D;AACO;AACP;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,yBAAyB;AACvC;AACA,+BAA+B,oBAAoB,EAAE,uBAAuB,kBAAkB,GAAG;AACjG,wCAAwC,KAAK;AAC7C,2CAA2C,mBAAmB,IAAI,MAAM;AACxE;AACA,gDAAgD,qBAAqB,IAAI,4CAAO,CAAC;AACjF,kDAAkD,uBAAuB,IAAI,8CAAS,CAAC;AACvF,iDAAiD,4CAAO,CAAC;AACzD,gDAAgD,2CAAM,CAAC;AACvD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;UCzGA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;ACNa;AACb;AACA;AAOoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,wBAAwB;AACxB;AACA;AACA,0DAAe;AACf;AACA;AACA;AACA;AACA;AACA,oCAAoC,uDAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,+DAAoB;AAC3C;AACA,QAAQ,2DAAgB;AACxB;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE,+DAAoB;AACtB,EAAE,0DAAe;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,uBAAuB,+DAAoB,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE,+DAAoB;AACtB,EAAE,0DAAe;AACjB;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,uBAAuB,+DAAoB,IAAI;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE,+DAAoB;AACtB,EAAE,0DAAe;AACjB;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,uBAAuB,+DAAoB,IAAI;AAC/C,qEAAqE;AACrE,EAAE,+DAAoB;AACtB,EAAE,0DAAe;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,4CAA4C;AAC5C,yCAAyC;AACzC,wBAAwB,oBAAoB,GAAG;AAC/C;AACA;AACA;AACA;AACA,uBAAuB,+DAAoB;AAC3C;AACA;AACA;AACA;AACA,IAAI,+DAAoB;AACxB,IAAI,0DAAe;AACnB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://Todo-кейс/./src/js/svg.js","webpack://Todo-кейс/./src/js/utils.js","webpack://Todo-кейс/webpack/bootstrap","webpack://Todo-кейс/webpack/runtime/define property getters","webpack://Todo-кейс/webpack/runtime/hasOwnProperty shorthand","webpack://Todo-кейс/webpack/runtime/make namespace object","webpack://Todo-кейс/./src/js/index.js"],"sourcesContent":["export const doneSvg = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z\"/>\r\n        <path d=\"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z\"/>\r\n    </svg>\r\n`;\r\n\r\nexport const pinnedSvg = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M4.146.146A.5.5 0 0 1 4.5 0h7a.5.5 0 0 1 .5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5 0 0 1-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4a.5.5 0 0 1-.5-.5c0-.973.64-1.725 1.17-2.189A5.921 5.921 0 0 1 5 6.708V2.277a2.77 2.77 0 0 1-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5 0 0 1 .146-.354zm1.58 1.408-.002-.001.002.001zm-.002-.001.002.001A.5.5 0 0 1 6 2v5a.5.5 0 0 1-.276.447h-.002l-.012.007-.054.03a4.922 4.922 0 0 0-.827.58c-.318.278-.585.596-.725.936h7.792c-.14-.34-.407-.658-.725-.936a4.915 4.915 0 0 0-.881-.61l-.012-.006h-.002A.5.5 0 0 1 10 7V2a.5.5 0 0 1 .295-.458 1.775 1.775 0 0 0 .351-.271c.08-.08.155-.17.214-.271H5.14c.06.1.133.191.214.271a1.78 1.78 0 0 0 .37.282z\"/>\r\n    </svg>\r\n`;\r\n\r\nexport const delSvg = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M6.854 7.146a.5.5 0 1 0-.708.708L7.293 9l-1.147 1.146a.5.5 0 0 0 .708.708L8 9.707l1.146 1.147a.5.5 0 0 0 .708-.708L8.707 9l1.147-1.146a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146z\"/>\r\n        <path d=\"M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z\"/>\r\n    </svg>\r\n`;\r\n\r\nexport const editSvg = `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"/>\r\n        <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"/>\r\n    </svg>\r\n`;","import { doneSvg, pinnedSvg, delSvg, editSvg } from './svg.js';\r\n\r\nexport function getTasksLocalStorage() {\r\n  const taskJSON = localStorage.getItem('tasks');\r\n  return taskJSON ? JSON.parse(taskJSON) : [];\r\n}\r\n\r\nexport function setTasksLocalStorage(tasks) {\r\n  localStorage.setItem('tasks', JSON.stringify(tasks));\r\n}\r\n\r\nexport function generateUniqueId() {\r\n  const timestamp = Date.now();\r\n  const randomPart = Math.floor(Math.random() * 10000);\r\n  const randomPartTwo = Math.floor(Math.random() * 10000);\r\n  return timestamp + randomPart + randomPartTwo;\r\n}\r\n\r\nexport function updateListTasks() {\r\n  document.querySelector('.output').textContent = '';\r\n  const arrayTasksLS = getTasksLocalStorage();\r\n  renderTasks(arrayTasksLS);\r\n}\r\n\r\nfunction renderTasks(tasks) {\r\n  if (!tasks || !tasks.length) return;\r\n\r\n  tasks\r\n    .sort((a, b) => {\r\n      //сортировка по выполнению\r\n      if (a.done !== b.done) {\r\n        return a.done ? 1 : -1;\r\n      }\r\n      // сортировка по закреплению\r\n      if (a.pinned !== b.pinned) {\r\n        return a.pinned ? -1 : 1;\r\n      }\r\n      // сортировка по позиции\r\n      return a.position - b.position;\r\n    })\r\n    .forEach((value, i) => {\r\n      const { id, task, pinned, done } = value;\r\n      const item = `\r\n            <div class=\"task ${done ? 'done' : ''} ${pinned ? 'pinned' : ''}\" data-task-id=\"${id}\" draggable=\"true\">\r\n                <p class=\"task__text\">${task}</p>\r\n                <span class=\"task__index ${done ? 'none' : ''}\">${i + 1}</span>\r\n                <div class=\"task__btns\">\r\n                    <button class=\"task__done ${done ? 'active' : ''}\">${doneSvg}</button>\r\n                    <button class=\"task__pinned ${pinned ? 'active' : ''}\">${pinnedSvg}</button>\r\n                    <button class=\"task__edit\">${editSvg}</button>\r\n                    <button class=\"task__del\">${delSvg}</button>\r\n                </div>\r\n            </div>\r\n            `;\r\n      document.querySelector('.output').insertAdjacentHTML('beforeend', item);\r\n    });\r\n\r\n  activationDrag();\r\n}\r\n\r\n// перетаскивание задачи\r\nfunction activationDrag() {\r\n  const tasks = [...document.querySelectorAll('.task')];\r\n  tasks.forEach((task) => {\r\n    task.addEventListener('dragstart', () => {\r\n      setTimeout(() => task.classList.add('dragging'), 0);\r\n    });\r\n    task.addEventListener('dragend', () => {\r\n      task.classList.remove('dragging');\r\n      if (tasks.length > 1) {\r\n        savePositionTask();\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n// сохранение позиции задачи\r\nfunction savePositionTask() {\r\n  const arrayTasksLS = getTasksLocalStorage();\r\n  const tasks = [...document.querySelectorAll('.task')];\r\n\r\n  tasks.forEach((task, i) => {\r\n    const id = Number(task.dataset.taskId); // id задачи\r\n    const index = arrayTasksLS.findIndex((value) => value.id === id);\r\n    if (index !== -1) {\r\n      arrayTasksLS[index].position = i;\r\n    }\r\n  });\r\n\r\n  setTasksLocalStorage(arrayTasksLS);\r\n  updateListTasks();\r\n}\r\n\r\nexport function initSortableList(event) {\r\n  event.preventDefault();\r\n\r\n  const output = document.querySelector('.output');\r\n  const draggingItem = document.querySelector('.dragging');\r\n  let siblings = [...output.querySelectorAll('.task:not(.dragging)')]; // все эл-ты с классом task кроме тех, у кого есть dragging\r\n\r\n  let nextSibling = siblings.find((sibling) => {\r\n    return event.clientY <= sibling.offsetTop + sibling.offsetHeight / 2;\r\n  });\r\n\r\n  output.insertBefore(draggingItem, nextSibling);\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\r\n//==========================================\r\n\r\nimport {\r\n  getTasksLocalStorage,\r\n  setTasksLocalStorage,\r\n  generateUniqueId,\r\n  initSortableList,\r\n  updateListTasks,\r\n} from './utils.js';\r\n\r\nconst form = document.querySelector('.form');\r\nconst textareaForm = document.querySelector('.form__textarea');\r\nconst buttonSendForm = document.querySelector('.form__send-btn');\r\nconst buttonCancel = document.querySelector('.form__cancel-btn');\r\nconst output = document.querySelector('.output');\r\nlet editId = null; // id редактируемой задачи\r\nlet isEditTask = false; // процесс редактирования задачи\r\n\r\n// отображение задачи при первой загрузке\r\nupdateListTasks();\r\n\r\n// All eventListeneer\r\nform.addEventListener('submit', sendTask);\r\nbuttonCancel.addEventListener('click', resetSendForm);\r\noutput.addEventListener('dragenter', (e) => e.preventDefault());\r\noutput.addEventListener('dragover', initSortableList);\r\n\r\noutput.addEventListener('click', (e) => {\r\n  const taskElement = e.target.closest('.task__btns');\r\n  if (!taskElement) return;\r\n\r\n  if (e.target.closest('.task__pinned')) {\r\n    pinnedTask(e);\r\n  } else if (e.target.closest('.task__edit')) {\r\n    editTask(e);\r\n  } else if (e.target.closest('.task__del')) {\r\n    delTask(e);\r\n  } else if (e.target.closest('.task__done')) {\r\n    doneTask(e);\r\n  }\r\n});\r\n\r\n// All functions\r\n\r\n// добавление задачи\r\nfunction sendTask(event) {\r\n  event.preventDefault();\r\n\r\n  const task = textareaForm.value.trim().replace(/\\s+/g, ' '); // удаление лишних пробелов\r\n  if (!task) {\r\n    return alert('Поле пустое!');\r\n  }\r\n\r\n  if (isEditTask) {\r\n    saveEditedTask(task);\r\n    return;\r\n  }\r\n\r\n  const arrayTasksLS = getTasksLocalStorage();\r\n  arrayTasksLS.push({\r\n    id: generateUniqueId(),\r\n    task,\r\n    done: false,\r\n    pinned: false,\r\n    position: 1000,\r\n  });\r\n  setTasksLocalStorage(arrayTasksLS);\r\n  updateListTasks();\r\n\r\n  form.reset();\r\n}\r\n\r\n//выполнение задачи\r\nfunction doneTask(event) {\r\n  const task = event.target.closest('.task');\r\n  const id = Number(task.dataset.taskId); // id задачи\r\n\r\n  const arrayTasksLS = getTasksLocalStorage(); // получаем массив из LocalStorage\r\n  const index = arrayTasksLS.findIndex((task) => task.id === id);\r\n\r\n  if (index === -1) {\r\n    return alert('Задача не найдена!');\r\n  }\r\n\r\n  // снять закреп с выполненной задачи\r\n  if (!arrayTasksLS[index].done && arrayTasksLS[index].pinned) {\r\n    arrayTasksLS[index].pinned = false;\r\n  }\r\n\r\n  // переключатель выполнения задачи\r\n  if (arrayTasksLS[index].done) {\r\n    arrayTasksLS[index].done = false;\r\n  } else {\r\n    arrayTasksLS[index].done = true;\r\n  }\r\n\r\n  setTasksLocalStorage(arrayTasksLS);\r\n  updateListTasks();\r\n}\r\n\r\n// закрепление задачи\r\nfunction pinnedTask(event) {\r\n  const task = event.target.closest('.task');\r\n  const id = Number(task.dataset.taskId); // id задачи\r\n\r\n  const arrayTasksLS = getTasksLocalStorage(); // получаем массив из LocalStorage\r\n  const index = arrayTasksLS.findIndex((task) => task.id === id);\r\n\r\n  if (index === -1) {\r\n    return alert('Задача не найдена!');\r\n  }\r\n\r\n  if (!arrayTasksLS[index].pinned && arrayTasksLS[index].done) {\r\n    return alert('Чтобы закрепить задачу, сначала уберите отметку о выполнении');\r\n  }\r\n\r\n  if (arrayTasksLS[index].pinned) {\r\n    arrayTasksLS[index].pinned = false;\r\n  } else {\r\n    arrayTasksLS[index].pinned = true;\r\n  }\r\n\r\n  setTasksLocalStorage(arrayTasksLS);\r\n  updateListTasks();\r\n}\r\n\r\n// удаление задачи\r\nfunction delTask(event) {\r\n  const task = event.target.closest('.task');\r\n  const id = Number(task.dataset.taskId); // id задачи\r\n\r\n  const arrayTasksLS = getTasksLocalStorage(); // получаем массив из LocalStorage\r\n  const newTasksArr = arrayTasksLS.filter((task) => task.id !== id); // возвращаем все значения массива, кроме id\r\n  setTasksLocalStorage(newTasksArr);\r\n  updateListTasks();\r\n}\r\n\r\n// редактирование задачи\r\nfunction editTask(event) {\r\n  const task = event.target.closest('.task');\r\n  const text = task.querySelector('.task__text');\r\n  editId = Number(task.dataset.taskId);\r\n\r\n  textareaForm.value = text.textContent; // текст задачи в поле ввода\r\n  isEditTask = true;\r\n  buttonSendForm.textContent = 'Сохранить'; // меняем \"Добавить\" на \"Сохранить\"\r\n  buttonCancel.classList.remove('none'); // показываем кнопку \"Отмена\"\r\n  form.scrollIntoView({ behavior: 'smooth' }); // прокрутка к зоне редактирования\r\n}\r\n\r\n// сохранение отредактированной задачи\r\nfunction saveEditedTask(task) {\r\n  const arrayTasksLS = getTasksLocalStorage();\r\n  const editedTaskIndex = arrayTasksLS.findIndex((task) => task.id === editId);\r\n\r\n  if (editedTaskIndex !== -1) {\r\n    arrayTasksLS[editedTaskIndex].task = task;\r\n    setTasksLocalStorage(arrayTasksLS);\r\n    updateListTasks();\r\n  } else {\r\n    alert('Задача не найдена!');\r\n  }\r\n\r\n  resetSendForm();\r\n}\r\n\r\n// сброс формы для редактирования\r\nfunction resetSendForm() {\r\n  editId = null;\r\n  isEditTask = false;\r\n  buttonCancel.classList.add('none');\r\n  buttonSendForm.textContent = 'Добавить';\r\n  form.reset();\r\n}\r\n"],"names":[],"sourceRoot":""}